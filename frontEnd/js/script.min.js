/*! frontend 2021-09-16 */

!function(){let d;$.ajax({url:"config.json",type:"GET",dataType:"json",success:function(e){d=`${e.SERVER_URL}:${e.SERVER_PORT}`},error:function(e){console.log(e)}}),console.log("script is linked"),console.log(sessionStorage),$(document).ready(function(){$("#createListing").hide(),$("#jobPost").hide(),$("#createAd").click(function(){$("#createListing").show()}),$("#addPost").click(function(){$("#jobPost").show(),$("#createListing").hide(),event.preventDefault();var e=$("#businessName").val(),t=$("#jobTitle").val(),a=$("#jobDescription").val(),o=sessionStorage.getItem("userID");console.log(o),console.log(e,t,a),""==e||""==t||""==a?alert("Please enter all details"):($.ajax({url:`${d}/addPost`,type:"POST",data:{jobTitle:t,posterName:e,jobDescription:a,username:o},success:function(e){console.log("post added")},error:function(){console.log("error: cannot call api")}}),$.ajax({url:`${d}/allPosts`,type:"GET",dataType:"json",success:function(e){var t;for(console.log(e),document.getElementById("jobPost").innerHTML="",t=0;t<e.length;t++)console.log(e[t]),document.getElementById("jobPost").innerHTML+=`
            <div>
              <h2>${e[t].jobTitle}</h2>
              <h4>${e[t].posterName}</h4>
              <hr>
              <p id="postDetails">${e[t].jobDescription}</p>
              <button id="editPost" name="productButton" type="submit" class="btn btn-primary mx-2">Edit</button>

              <button id="deletePost" name="productButton" type="submit" class="btn btn-primary mx-2">Delete</button>

            </div>
            `},error:function(){}}))}),$("#updateJOBPOSTXXXX").click(function(){event.preventDefault();var e=sessionStorage.getItem("userID"),t=$("#inputidUpdate").val(),a=$("#inputidUpdate").val(),o=$("#inputidUpdate").val();console.log(t,a,o,username,e),""==t||""==a||""==o?alert("Please enter post update information"):$.ajax({url:`${d}/updatePost/:id`,type:"PATCH",data:{jobTitle:t,posterName:a,jobDescription:o,username_id:e},success:function(e){console.log(e),"401 error: user has no permission to update"==e?alert("401 error: user has no permission to update"):alert("updated"),$("#inputidUpdate").val(""),$("#inputidUpdate").val(""),$("#inputidUpdate").val("")},error:function(){console.log("error:cannot call api")}})}),studentDash=()=>{console.log(d),$.ajax({url:`${d}/allPosts`,type:"GET",dataType:"json",success:function(e){var t;for(console.log(e),document.getElementById("sdJobPost").innerHTML="",t=0;t<e.length;t++)console.log(e[t]),document.getElementById("sdJobPost").innerHTML+=`
              <h2>${e[t].jobTitle}</h2>
              <h4>${e[t].posterName}</h4>
              <hr>
              <p id="postDetails">${e[t].jobDescription}</p>
              <button id="commentOn" name="commentButton" type="submit" class="btn btn-primary mx-2">Comment</button>
              `},error:function(){}})},studentProf=()=>{console.log(d),$.ajax({url:`${d}/allPosts`,type:"GET",dataType:"json",success:function(e){var t;for(console.log(e),document.getElementById("sdJobPost").innerHTML="",t=0;t<e.length;t++)console.log(e[t]),document.getElementById("sdJobPost").innerHTML+=`
              <h2>${e[t].jobTitle}</h2>
              <h4>${e[t].posterName}</h4>
              <hr>
              <p id="postDetails">${e[t].jobDescription}</p>
              <button id="commentOn" name="commentButton" type="submit" class="btn btn-primary mx-2">Comment</button>
              `},error:function(){}})},$("#XXXCREATE-ACC-BTN-STUDENT").click(function(){event.preventDefault();var e=$("#name-INPUT").val(),t=$("#username-INPUT").val(),a=$("#email-INPUT").val(),o=$("#password-INPUT").val(),s=$("#check-password-INPUT").val(),n=$("#pfp-INPUT").val(),r=$("#study-INPUT").val(),l=$("#educator-INPUT").val(),i=$("#extra-INPUT").val();console.log(e,t,a,o,n,r,l,i),o!=s?($("#check-password-INPUT").val(""),alert("Passwords do not match. Please try again")):""==e||""==t||""==a||""==o||""==s||""==r||""==l?alert("Please enter all student details"):$.ajax({url:`${d}/registerStudent`,type:"POST",data:{name:e,username:t,email:a,password:o,pfpUrl:n,studyField:r,educator:l,extra:i},success:function(e){sessionStorage.setItem("userID",e._id),sessionStorage.setItem("userFullName",e.name),sessionStorage.setItem("username",e.username),sessionStorage.setItem("userEmail",e.email),sessionStorage.setItem("userPass",e.password),console.log(sessionStorage),console.log(e),"username taken already. Please try another name"!==e?alert("You have been registered!"):(alert("Username taken already. Please try another name"),$("#username").val(""),$("#email").val(""),$("#password").val(""))},error:function(){console.log("error: cannot call api")}})}),$("#").click(function(){event.preventDefault();var e=$("#name").val(),t=$("#username").val(),a=$("#user-email").val(),o=$("#password").val(),s=$("#check-password-INPUT").val(),n=$("#profile-INPUT").val(),r=$("#r-name").val(),l=$("#company-name").val(),i=$("#r-extra").val();console.log(e,t,a,o,n,r,l,i),o!=s?($("#check-password-INPUT").val(""),alert("Passwords do not match. Please try again")):""==e||""==t||""==a||""==o||""==s||""==r||""==l?alert("Please enter all employer details"):$.ajax({url:`${d}/registerEmployer`,type:"POST",data:{name:e,username:t,email:a,password:o,pfpUrl:n,workField:r,companyName:r,extra:i},success:function(e){sessionStorage.setItem("userID",e._id),sessionStorage.setItem("userFullName",e.name),sessionStorage.setItem("username",e.username),sessionStorage.setItem("userEmail",e.email),sessionStorage.setItem("userPass",e.password),console.log(sessionStorage),console.log(e),"username taken already. Please try another name"!==e?alert("You have been registered!"):(alert("username taken already. Please try another name"),$("#username").val(""),$("#user-email").val(""),$("#password").val(""))},error:function(){console.log("error: cannot call api")}})}),$("#updateSTUDENTPROFILE").click(function(){event.preventDefault();var e=sessionStorage.getItem("userID"),t=$("#inputidUpdate").val(),a=$("#inputidUpdate").val(),o=$("#inputidUpdate").val(),s=$("#inputidUpdate").val();console.log(t,a,o,s,e),""==t||""==a||""==o||""==s?alert("Please enter profile update information"):$.ajax({url:`${d}/updateStudent/:id`,type:"PATCH",data:{name:t,studyField:a,educator:o,extra:s,username_id:e},success:function(e){console.log(e),"401 error: user has no permission to update"==e?alert("401 error: user has no permission to update"):alert("updated"),$("#inputidUpdate").val(""),$("#inputidUpdate").val(""),$("#inputidUpdate").val(""),$("#inputidUpdate").val("")},error:function(){console.log("error:cannot call api")}})})}),"student-profiles-page"===$("body").data("title")&&($(".student-carousel").slick({arrows:!0,infinite:!0,slidesToShow:3,slidesToScroll:1,prevArrow:'<div class="slick-prev"></div>',nextArrow:'<div class="slick-next"></div>'}),window.addEventListener("load",()=>{$.ajax({url:`${d}/allStudents`,type:"GET",dataType:"json",success:function(e){for(var t=0;t<e.length;t++)$(".student-carousel").slick("slickAdd",`
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">${e[t].name}</h5>
                <h6>@${e[t].username} â€¢ ${e[t].educator}</h6>
                <div class="img-container__crop-students mx-auto">
                    <img src="${e[t].pfpUrl}" alt="${e[t].name}'s profile picture'">
                </div>
                <h5>${e[t].studyField}</h5>
                <p class="card-text">${e[t].extra}</p>
             </div>
            </div>
            `)},error:function(){alert("Error: Cannot GET")}})}))}();