
/*! frontend 2021-09-14 */

console.log("script is linked"),console.log(sessionStorage),$(document).ready(function(){$("#createListing").hide(),$("#jobPost").hide(),$("#createAd").click(function(){$("#createListing").show()});let s;$.ajax({url:"config.json",type:"GET",dataType:"json",success:function(t){console.log(t.SERVER_URL,t.SERVER_PORT),s=`${t.SERVER_URL}:${t.SERVER_PORT}`,console.log(s)},error:function(t){console.log(t)}}),$("#addPost").click(function(){$("#jobPost").show(),$("#createListing").hide(),event.preventDefault();var t=$("#businessName").val(),o=$("#jobTitle").val(),e=$("#jobDescription").val(),n=sessionStorage.getItem("userID");console.log(n),console.log(t,o,e),""==t||""==o||""==e?alert("Please enter all details"):($.ajax({url:`${s}/addPost`,type:"POST",data:{jobTitle:o,posterName:t,jobDescription:e,username:n},success:function(t){console.log("post added")},error:function(){console.log("error: cannot call api")}}),$.ajax({url:`${s}/allPosts`,type:"GET",dataType:"json",success:function(t){var o;for(console.log(t),document.getElementById("jobPost").innerHTML="",o=0;o<t.length;o++)console.log(t[o]),document.getElementById("jobPost").innerHTML+=`
            <div>
              <h2>${t[o].jobTitle}</h2>
              <h4>${t[o].posterName}</h4>
              <hr>
              <p id="postDetails">${t[o].jobDescription}</p>
              <button id="editPost" name="productButton" type="submit" class="btn btn-primary mx-2">Edit</button>

              <button id="deletePost" name="productButton" type="submit" class="btn btn-primary mx-2">Delete</button>

            </div>
            `},error:function(){}}))}),$("#XXXXXX").click(function(){console.log(s),$.ajax({url:`${s}/allPosts`,type:"GET",dataType:"json",success:function(t){var o;for(console.log(t),document.getElementById("XXXX").innerHTML="",o=0;o<t.length;o++)console.log(t[o]),document.getElementById("XXXX").innerHTML+=`
              <div>
                <h2>${t[o].jobTitle}</h2>
                <h4>${t[o].posterName}</h4>
                <hr>
                <p id="postDetails">${t[o].jobDescription}</p>
                <button id="save" name="productButton" type="submit" class="btn btn-primary mx-2">Save Post</button>
                <button id="comment" name="productButton" type="submit" class="btn btn-primary mx-2">Comment Post</button>
              </div>
              `},error:function(){}})})});
