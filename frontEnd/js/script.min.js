/*! frontend 2021-09-17 */

console.log("script is linked"),console.log(sessionStorage),$(document).ready(function(){$("#createListing").hide(),$("#jobPost").hide(),$("#createAd").click(function(){$("#createListing").show()});let r;$.ajax({url:"config.json",type:"GET",dataType:"json",success:function(e){console.log(e.SERVER_URL,e.SERVER_PORT),r=`${e.SERVER_URL}:${e.SERVER_PORT}`,console.log(r)},error:function(e){console.log(e)}}),$("#addPost").click(function(){$("#jobPost").show(),$("#createListing").hide(),event.preventDefault();var e=$("#businessName").val(),t=$("#jobTitle").val(),o=$("#jobDescription").val(),a=sessionStorage.getItem("userID");console.log(a),console.log(e,t,o),""==e||""==t||""==o?alert("Please enter all details"):($.ajax({url:`${r}/addPost`,type:"POST",data:{jobTitle:t,posterName:e,jobDescription:o,username:a},success:function(e){console.log("post added")},error:function(){console.log("error: cannot call api")}}),$.ajax({url:`${r}/allPosts`,type:"GET",dataType:"json",success:function(e){var t;console.log(e);document.getElementById("editPost");for(document.getElementById("jobPost").innerHTML="",t=0;t<e.length;t++)console.log(e[t]),document.getElementById("jobPost").innerHTML+=`
            <div>
              <h2>${e[t].jobTitle}</h2>
              <h4>${e[t].posterName}</h4>
              <hr>
              <p id="postDetails">${e[t].jobDescription}</p>
            <div>
            <div>
              <button id="editPost" data-post-id="${e[t]._id}" name="productButton" type="submit" class="btn btn-primary mx-2">Edit</button>
              <br>
              <br>
              <button id="deletePost" name="productButton" type="submit" class="btn btn-primary mx-2">Delete</button>
            </div>`},error:function(){}}))}),$("#editPost").click(function(){alert("edit button clicked")}),studentDash=()=>{console.log(r),$.ajax({url:`${r}/allPosts`,type:"GET",dataType:"json",success:function(e){var t;for(console.log(e),document.getElementById("sdJobPost").innerHTML="",t=0;t<e.length;t++)console.log(e[t]),document.getElementById("sdJobPost").innerHTML+=`
              <h2>${e[t].jobTitle}</h2>
              <h4>${e[t].posterName}</h4>
              <hr>
              <p id="postDetails">${e[t].jobDescription}</p>
              <button id="commentOn" name="commentButton" type="submit" class="btn btn-primary mx-2">Comment</button>
              `},error:function(){}})},studentProf=()=>{console.log(r),$.ajax({url:`${r}/allPosts`,type:"GET",dataType:"json",success:function(e){var t;for(console.log(e),document.getElementById("sdJobPost").innerHTML="",t=0;t<e.length;t++)console.log(e[t]),document.getElementById("sdJobPost").innerHTML+=`
              <h2>${e[t].jobTitle}</h2>
              <h4>${e[t].posterName}</h4>
              <hr>
              <p id="postDetails">${e[t].jobDescription}</p>
              <button id="commentOn" name="commentButton" type="submit" class="btn btn-primary mx-2">Comment</button>
              `},error:function(){}})},$("#sRegSubmit").click(function(){event.preventDefault();var e=$("#name").val(),t=$("#username").val(),o=$("#user-email").val(),a=$("#password").val(),n=$("#StudyName").val(),l=$("#educatorName").val(),s=$("#studentExtra").val();console.log(e,t,o,a,n,l,s),""==e||""==t||""==o||""==a||""==n||""==l?alert("Please enter all student details"):$.ajax({url:`${r}/registerStudent`,type:"POST",data:{name:e,username:t,email:o,password:a,studyField:n,educator:l,extra:s},success:function(e){console.log(e),"username taken already. Please try another name"!==e?alert("Please login to manipulate the products data"):(alert("username taken already. Please try another name"),$("#username").val(""),$("#user-email").val(""),$("#password").val(""))},error:function(){console.log("error: cannot call api")}})}),$("#regSubmit").click(function(){event.preventDefault();var e=$("#name").val(),t=$("#username").val(),o=$("#user-email").val(),a=$("#password").val(),n=$("#r-name").val(),l=$("#company-name").val(),s=$("#r-extra").val();console.log(e,t,o,a,n,l,s),""==e||""==t||""==o||""==a||""==n||""==l?alert("Please enter all emplyoyer details"):$.ajax({url:`${r}/registerEmployer`,type:"POST",data:{name:e,username:t,email:o,password:a,workField:n,companyName:l,extra:s},success:function(e){console.log(e),"username taken already. Please try another name"!==e?console.log("Please login to manipulate the products data"):(console.log("username taken already. Please try another name"),$("#username").val(""),$("#user-email").val(""),$("#password").val(""))},error:function(){console.log("error: cannot call api")}})}),$("#").click(function(){event.preventDefault();var e=sessionStorage.getItem("userID");$("#name").val(),$("#username").val(),$("#user-email").val(),$("#password").val(),$("#r-name").val(),$("#company-name").val(),$("#r-extra").val();console.log(name,studyField,educator,extra,e),""==name||""==studyField||""==educator||""==extra?alert("Please enter profile update information"):$.ajax({url:`${r}/updateStudent/:id`,type:"PATCH",data:{name:name,studyField:studyField,educator:educator,extra:extra,username_id:e},success:function(e){console.log(e),"401 error: user has no permission to update"==e?alert("401 error: user has no permission to update"):alert("updated"),$("#inputidUpdate").val(""),$("#inputidUpdate").val(""),$("#inputidUpdate").val(""),$("#inputidUpdate").val("")},error:function(){console.log("error:cannot call api")}})})});